<!DOCTYPE html>
<html>
<head>
  <title>Lock App</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
  <h1>Lock App</h1>
  <button id="lockButton">Lock</button>
  <button id="unlockButton">Unlock</button>
  <button id="showListButton">一覧表示</button>
  <ul id="lockTimeList"></ul>

  <script>
    var lockTimes = []; // ロック日時の配列

    $("#lockButton").click(function() {
      var lockTime = new Date().toLocaleString(); // ロックボタンが押された日時を取得
      lockTimes.push({ time: lockTime, event: "Lock" }); // ロックイベントを配列に追加

      $.ajax({
        url: "http://your-iot-device-url/lock",
        method: "POST",
        success: function(response) {
          console.log("Lock command sent");
        },
        error: function(xhr, status, error) {
          console.error("Error sending lock command:", error);
        }
      });
    });

    $("#unlockButton").click(function() {
      var unlockTime = new Date().toLocaleString(); // アンロックボタンが押された日時を取得
      lockTimes.push({ time: unlockTime, event: "Unlock" }); // アンロックイベントを配列に追加

      $.ajax({
        url: "http://your-iot-device-url/unlock",
        method: "POST",
        success: function(response) {
          console.log("Unlock command sent");
        },
        error: function(xhr, status, error) {
          console.error("Error sending unlock command:", error);
        }
      });
    });

    $("#showListButton").click(function() {
      updateLockTimeList(); // ロック日時の一覧を更新
    });

    function updateLockTimeList() {
      var lockTimeList = $("#lockTimeList");
      lockTimeList.empty(); // リストをクリア

      for (var i = 0; i < lockTimes.length; i++) {
        var lockTimeItem = $("<li>").text(lockTimes[i].time); // リストアイテムを作成
        lockTimeList.append(lockTimeItem); // リストに追加

        if (lockTimes[i].event === "Lock") {
          lockTimeItem.addClass("lock-event"); // ロックイベントを示すクラスを追加
        } else if (lockTimes[i].event === "Unlock") {
          lockTimeItem.addClass("unlock-event"); // アンロックイベントを示すクラスを追加
        }
      }
    }
  </script>

  <style>
    .lock-event {
      color: blue;
    }

    .unlock-event {
      color: green;
    }
  </style>
</body>
</html>
